
/* =========================================================
   LeaveMgmt – Request List (assets/css/list.css)
   - Mobile-first, dark mode qua [data-theme]
   - Bảng sticky header + cuộn ngang
   - Touch-friendly, focus states, reduced motion
   - Tối ưu typography & khoảng cách
   ========================================================= */

/* -------- Design tokens -------- */
:root{
  --bg:#f6f8fb; --card:#ffffff; --text:#1f2937; --muted:#6b7280;
  --pri:#2563eb; --ok:#16a34a; --no:#dc2626; --warn:#d97706;
  --bd:#e5e7eb; --row:#fafafa; --ring:rgba(37,99,235,.25);
  --shadow-1:0 10px 22px rgba(0,0,0,.04);
  --shadow-2:0 6px 14px rgba(0,0,0,.06);
  --radius:14px;
  --radius-sm:10px;
  --radius-pill:999px;
  --space:8px;            /* base spacing */
  --space-2:12px;         /* 1.5x */
  --space-3:16px;         /* 2x   */
  --tap:40px;             /* min touch target */
  --font:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

[data-theme="dark"]{
  --bg:#0f1320; --card:#12172a; --text:#e5e7eb; --muted:#9aa3b2;
  --pri:#66a2ff; --ok:#22d38b; --no:#ff6b6b; --warn:#f0ad4e;
  --bd:#1e2438; --row:#0f162b; --ring:rgba(102,162,255,.28);
  --shadow-1:0 10px 22px rgba(0,0,0,.35);
  --shadow-2:0 6px 14px rgba(0,0,0,.35);
}

/* -------- Base / reset -------- */
html,body{background:var(--bg);color:var(--text)}
*{box-sizing:border-box}
body{
  font-family:var(--font);
  margin:24px;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;
}
.wrap{max-width:1200px;margin:auto}

/* Fallback cho người dùng không đặt data-theme */
@media (prefers-color-scheme: dark){
  html:not([data-theme]) body{
    background:#0f1320;color:#e5e7eb;
  }
}

/* -------- Utilities -------- */
.hidden{display:none !important}
.muted{color:var(--muted)}
.sr{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
.center{display:flex;align-items:center;justify-content:center}
.right{margin-left:auto}
.nowrap{white-space:nowrap}

/* Focus visible – accessible */
:where(a,button,input,select,textarea){
  outline:0;
}
:where(a,button,input,select,textarea):focus-visible{
  box-shadow:0 0 0 3px var(--ring);
  border-color:var(--pri) !important;
  outline:0;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{animation:none !important;transition:none !important;scroll-behavior:auto !important}
}

/* -------- Toolbar -------- */
.toolbar{
  display:flex;gap:var(--space);flex-wrap:wrap;align-items:center;margin-bottom:14px
}
.chips{display:flex;gap:6px;flex-wrap:wrap}
.chip{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 10px;border-radius:var(--radius-pill);
  border:1px solid var(--bd);background:var(--card);cursor:pointer;
  font-size:12px;min-height:var(--tap);
}
.chip:hover{box-shadow:0 0 0 3px rgba(0,0,0,.04)}
.chip.active{border-color:var(--pri);box-shadow:0 0 0 3px var(--ring)}

/* Inputs */
input[type="text"], input[type="date"], select, textarea{
  padding:8px 10px;border:1px solid #d1d5db;border-radius:8px;background:#fff;color:#111;
  transition:box-shadow .15s,border-color .15s;
  min-height:var(--tap);
}
[data-theme="dark"] input[type="text"], [data-theme="dark"] input[type="date"],
[data-theme="dark"] select, [data-theme="dark"] textarea{
  background:#0b1020;color:#e5e7eb;border-color:#26304a
}

/* Buttons */
.btn,.btn-icon{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 12px;border-radius:var(--radius-sm);border:1px solid var(--bd);
  text-decoration:none;color:var(--text);background:var(--card);cursor:pointer;
  transition:transform .06s, box-shadow .15s, background .15s, border-color .15s;
  min-height:var(--tap);
}
.btn:hover,.btn-icon:hover{box-shadow:var(--shadow-2)}
.btn:active,.btn-icon:active{transform:translateY(1px)}
.btn-primary{background:var(--pri);border-color:var(--pri);color:#fff}
.btn-primary:hover{filter:brightness(1.03)}
.btn-ghost{background:var(--card)}
.btn-icon{padding:6px 10px}

/* -------- Cards -------- */
.card{
  border:1px solid var(--bd);
  border-radius:var(--radius);
  overflow:hidden;
  background:var(--card);
  box-shadow:var(--shadow-1);
}
.card-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 12px;background:linear-gradient(0deg,var(--row),var(--row))
}

/* -------- Table -------- */
.table-scroll{overflow-x:auto;scrollbar-gutter:stable both-edges}
.table-scroll::-webkit-scrollbar{height:10px}
.table-scroll::-webkit-scrollbar-thumb{background:var(--bd);border-radius:10px}

table{
  width:100%;
  border-collapse:separate;border-spacing:0;
  min-width:920px; /* giúp mobile có thể cuộn ngang */
}
th,td{padding:10px 12px;border-top:1px solid var(--bd);vertical-align:middle}
th{
  position:sticky;top:0;background:var(--row);text-align:left;font-weight:700;z-index:2;
  backdrop-filter:saturate(180%) blur(4px);
}
tbody tr:nth-child(odd){background:transparent}
tbody tr:nth-child(even){background:rgba(0,0,0,0.015)}
[data-theme="dark"] tbody tr:nth-child(even){background:#0c1326}
tbody tr:hover{background:rgba(37,99,235,.06)}
[data-theme="dark"] tbody tr:hover{background:rgba(102,162,255,.12)}
.row-select{width:34px}

.cell-reason{max-width:360px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* Status pills */
.pill{
  display:inline-flex;gap:6px;align-items:center;padding:4px 10px;
  border-radius:var(--radius-pill);font-size:12px;font-weight:700;
  border:1px solid transparent
}
.PENDING{background:#fff7ed;color:#9a3412;border-color:#fde68a}
.APPROVED{background:#ecfdf5;color:#14532d;border-color:#bbf7d0}
.REJECTED{background:#fef2f2;color:#7f1d1d;border-color:#fecaca}
.CANCELLED{background:#f3f4f6;color:#374151;border-color:#e5e7eb}
[data-theme="dark"] .PENDING{background:#2a1e06;color:#f6ca7a;border-color:#5e4b20}
[data-theme="dark"] .APPROVED{background:#073221;color:#8ee0bd;border-color:#1c6b4f}
[data-theme="dark"] .REJECTED{background:#2c0c0c;color:#ff9f9f;border-color:#6b2323}
[data-theme="dark"] .CANCELLED{background:#1b2030;color:#bcc6d9;border-color:#2a3148}

/* Actions */
.table-actions a{margin-right:6px}
.table-actions .danger{color:var(--no)}
.table-actions .ok{color:var(--ok)}
.table-actions .warn{color:var(--warn)}

/* Pagination */
.pagination{
  display:flex;gap:6px;justify-content:flex-end;padding:10px;flex-wrap:wrap
}
.pagination a,.pagination span{
  padding:6px 10px;border:1px solid var(--bd);border-radius:8px;
  text-decoration:none;background:var(--card);color:var(--text);min-height:var(--tap);
}
.pagination a:hover{box-shadow:0 0 0 3px rgba(0,0,0,.04)}
.pagination span[aria-current="page"]{box-shadow:0 0 0 3px var(--ring);border-color:var(--pri)}

/* KPI */
.kpi{display:flex;gap:10px;flex-wrap:wrap}
.kpi .box{
  border:1px solid var(--bd);border-radius:12px;padding:10px 12px;
  background:var(--card);box-shadow:var(--shadow-2)
}

/* Empty state */
.empty{padding:28px;text-align:center;color:var(--muted)}

/* Bulk bar (sticky bottom) */
.bulkbar{
  position:sticky;bottom:0;background:var(--card);border-top:1px solid var(--bd);
  padding:8px 12px;display:none;align-items:center;gap:8px;z-index:5
}
.bulkbar.show{display:flex}
.badgeSel{border:1px solid var(--bd);border-radius:var(--radius-pill);padding:4px 10px;background:var(--row)}

/* Dialogs */
dialog{
  border:none;border-radius:var(--radius);max-width:520px;width:90%;
  background:var(--card);color:var(--text);padding:var(--space-3);
}
dialog::backdrop{background:rgba(0,0,0,.35)}
.modal-head{font-weight:700;margin-bottom:8px}

/* Messages (toast-like blocks) */
.msg{margin:8px 0;padding:8px 10px;border-radius:10px;border:1px solid}
.msg.ok{background:#ecfdf5;color:#166534;border-color:#bbf7d0}
.msg.no{background:#fef2f2;color:#991b1b;border-color:#fecaca}
[data-theme="dark"] .msg.ok{background:#0e2b1f;color:#8ee0bd;border-color:#1c6b4f}
[data-theme="dark"] .msg.no{background:#2c0c0c;color:#ffb1b1;border-color:#6b2323}

mark{background:#fff3b0;color:inherit;padding:0 .15rem;border-radius:.2rem}
[data-theme="dark"] mark{background:#504200}

/* -------- RESPONSIVE -------- */

/* Tablet */
@media (max-width: 1024px){
  body{margin:16px}
  .cell-reason{max-width:260px}
  .btn,.btn-icon{padding:8px 10px}
}

/* Mobile – ẩn cột ít quan trọng, tăng touch target, cho phép scroll ngang */
@media (max-width: 768px){
  .toolbar{gap:6px}
  .kpi .box{flex:1 1 46%}
  table{min-width:760px} /* đủ rộng để cuộn ngang mượt */
  th:nth-child(4), td:nth-child(4){display:none} /* Người tạo */
  th:nth-child(8), td:nth-child(8){display:none} /* Người xử lý */
  .cell-reason{max-width:200px}
  .btn,.btn-icon{min-height:var(--tap)}
  .pagination{justify-content:center}
}

/* Very small phones */
@media (max-width: 420px){
  .cell-reason{max-width:160px}
  .chips{gap:4px}
}

/* -------- Print (xuất giấy/ PDF) -------- */
@media print{
  body{margin:0;background:#fff;color:#000}
  .toolbar,.chips,.bulkbar,.pagination,.kpi,.btn,.btn-icon{display:none !important}
  .card{border:none;box-shadow:none}
  th{position:static;background:#eee}
  table{min-width:auto}
}
